<Virtualhost *:8080>
  ServerName ${SERVER_NAME}

  RequestHeader set X-Forwarded-Proto "https"
  RequestHeader set X-Real-IP %{REMOTE_ADDR}s
  RequestHeader set X-Unique-ID %{UNIQUE_ID}e

  ## Proxy rules
  ProxyRequests Off
  ProxyPreserveHost On
  ProxyErrorOverride Off

  ProxyTimeout ${PROXY_TIMEOUT}

  Alias "/errors" "/opt/app-root/errors"

  ErrorDocument 502 /errors/maintenance.html
  ErrorDocument 503 /errors/maintenance.html
  ErrorDocument 503 /errors/maintenance.html
  ErrorDocument 504 /errors/maintenance.html
  ProxyPass /errors/ !
  ProxyPassReverse /errors !
  ProxyPass / ${BACKEND} disablereuse=on
  ProxyPassReverse / ${BACKEND}

</VirtualHost>
